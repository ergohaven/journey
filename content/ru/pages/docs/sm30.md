---
title: "Space Mission 30"
tags: ["docs", "sm30"]
---

![image](/images/layouts/sm30_layers_0.png)

![image](/images/layouts/sm30_layers_1.png)

**Space Mission 30** — механический игровой кейпад, созданный для максимального комфорта и безупречных побед

## Устройство кейпада
![image](/images/sm30/sm30_bottom.png)
1. кнопка BOOT
2. кнопка RESET
3. силиконовые ножки
4. вспомогательное окно для разбора корпуса кейпада

![image](/images/sm30/sm30_top.png)

5. USB-C разъем
6. дисплей
7. место для установки MX-свитча либо хотсвап-энкодера

## Подключение
- Кейпад **Space Mission 30** работает с устройствами под управлением Windows, macOS, Linux, Android, iOS
- Подключение кейпада осущевствляется посредством Plug and Play (PnP), дополнительная **установка драйверов не требуется**
- При подключении к устройству, убедитесь, что кабель USB-C плотно вставлен в разъем кейпада

## Настройка кейпада

### Настройка слоев (раскладок) в Vial
Слои позволяют изменять функциональность кейпада в зависимости от того, на каком **слое** он находится в данный момент

<details>
  <summary>Назначение клавиш для переключения слоя (layers)</summary>

1. **Установите и откройте [Vial](https://ru.ergohaven.xyz/vial) или используйте [веб-версию](https://vial.rocks/), подключите кейпад**

>*Вы можете просмотреть каждый доступный слой, щелкнув соответствующий номер в верхней части интерфейса. **Layer 0** — это ваш базовый/основной слой*

![image](/images/sm30/sm30_layer_0.gif)

2. **Выберите слой с которого будет осуществляться активация вашего будущего слоя**

По умолчанию вам доступны базовый слой **Layer 0** и дополнительный слой **Layer 1** (активируется зажатием клавиши **MO(1)**) В данном примере настроим переключение с базового слоя **Layer 0**

3. **Выберите клавишу, которая будет активирорвать ваш слой и в нижнем меню перейдите во вкладку слоя (layers)**

>*Переключение между слоями может осуществляться несколькими способами. В нижнем меню выберите вкладку слоя, чтобы просмотреть все различные параметры*

4. **Выберите интересующий метод активации слоя и номер слоя который будет задействован**

>В данном примере рассмотрим переключение слоя через - **TG(*)**, который активирует слой, если он неактивен, и наоборот. Ознакомитья с остальными методами переключения слоев вы можете в [нашей статье](https://journey.ergohaven.xyz/pages/docs/vial/#layer). По умолчанию у нас уже есть 2 слоя с раскладкой, то в этом примере настроим 3 слой для новой раскладки, по-этому выберем **TG(3)**, где в скобках указан номер переключаемого слоя

![image](/images/sm30/sm30_layer_1.gif)

5. **Выберите редактируемый слой и назначьте клавиши/макросы на интересующие кнопки**

Так как мы создаем свой слой под номером 3, то выберем **Layer 3** в верхней части интерфейса. Для начала назначим клавишу для деактивации нашего слоя и возврата на базовый слой **Layer 0**, для этого выберем ту же кнопку на раскладке и снова нажмем на **TG(3)** в нижней вкладке Layers

![image](/images/sm30/sm30_layer_2.gif)

Для примера назначим стрелочки на место W, A, S, D, для этого на нашем 3 слое поочередно выбираем место на раскладке и нажимаем на соответсвующие кнопки в нижней вкладке **Basic**

![image](/images/sm30/sm30_layer_3.gif)

>*P.S. Символ треугольника обозначает пропуск. Это значит, что действие при нажатии на клавишу с треугольником будет такое же, как на слое под ним. В нашем примере под нашим слоем ***Layer 3*** будет дополнительный слой ***Layer 2*** и нажатия на клавиши с символом треугольника будут вызывать соответствующие действия как на дополнительном слое*

### Примеры использования слоёв:

- Отдельный слой под раскладки, которые подходят для различных типов игр
- Отдельный слой под макросы, которые помогают быстро отправлять сообщения во внутриигровых чатах, либо использовать комбо

</details>

### Создание макросов в Vial
Макросы позволяют отправлять несколько нажатий клавиш при нажатии только одной клавиши. Они могут делать все, что вы хотите: печатать целые предложения, повторять однотипные действия в играх

<details>
  <summary>Конфигурация Macros для создания комбо</summary>

**Создадим макрос, который вызывает поочередно нажатия на клавиши *A, D, S, S, J***

1. **Откройте [Vial](https://ru.ergohaven.xyz/vial) или используйте [веб-версию](https://vial.rocks/), в верхнем меню перейдите во вкладку Macros**

>В открывшейся вкладке вы можете просмотреть каждый доступный **макрос**, щелкнув соответствующий номер в верхней части интерфейса, всего доступно для создания до 109 макросов

![image](/images/sm30/sm30_macros_0.gif)

2. **Выберите номер макроса, в нижнем правом углу нажмите *Add action***

В нашем примере мы будем создавать макрос **M0** через наиболее распространенный способ - **Add action**,  который вручную добавляет действие в список 

![image](/images/sm30/sm30_macros_1.gif)

>*Вы так же можете использовать ***Tap Enter*** - сразу добавляет нажатие клавиши Enter для упрощения и ***Record macro*** - запись макроса прямо с клавиатуры*

3. **Выберите нужное действие в раскрывающемся списке и назначьте клавиши для этого действия**

Выберем действие **Tap**, которое вызывает однократное нажатие на клавишу, либо комбинацию клавиш одновременно и нажмем на кнопку **+ (плюс)** и назначим на нее клавишу **A**

![image](/images/sm30/sm30_macros_2.gif)

>*Вам так же доступны действия **Text** - набор шаблонов текста для сообщений, кусков кода и т.д., **Down** - зажатие клавиши, либо комбинации клавиш одновременно, **Up** - отжатие клавиши, либо комбинации клавиш, **Delay(ms)** - задержка в миллисекундах между действиями в макросе*

4. **Добавим следующее действие в макрос, аналогично предыдущему пункту**

Снова нажмем **Add action**, выберем **Tap**, нажмем **+ (плюс)** и назначим клавишу. Но теперь выберем кдавишу **D**
>*Порядок действий в макросе идет сверху вниз, учитывайте это правило при создании макросов, если нужно поменять порядок действий в макросе - используйте кнопки стрелка вверх и вниз слева от перемещаемого действия*

![image](/images/sm30/sm30_macros_3.gif)

5. **Добавим остальные действия в макрос и сохраним результат**

Аналогично **3 пункту** добавим в наш макрос нажатия клавиш **S, S, J** 

![image](/images/sm30/sm30_macros_4.gif)

В конце создания макроса его нужно сохранить, нажмите кнопку **Save** в нижнем правом углу

![image](/images/sm30/sm30_macros_5.gif)

>*Макросы сохраняются во внутреннюю память клавиатуры и так же работают с другого ПК. При сохранении макроса Vial попросит разблокировать клавиатуру путем удержания двух клавиш в верхнем левом углу*

6. **Добавим клавишу созданого макроса в раскладку**

В данном примере назначим наш макрос **M0** на клавишу третьего слоя **Layer 3**. Перейдем во вкладку **Keymap** в вехнем меню, выберем 3 слой, выберем интересущую нас клавишу на раскладке и нижней вкладке **Macros** нажмем на кнопку **M0**

![image](/images/sm30/sm30_macros_6.gif)

>*Выбирайте любой удобный слой и положение клавиши для вызова макроса, как создавать слои читайте выше*

</details>

<details>
  <summary>Конфигурация Macros для набора текста</summary>

**Для примера создадим макрос, который вызывает общий чат в игре Counter Strike 1.6, пишет текст *"Hello!"* и отправляет сообщение в чат**

Для реализации этого примера нужно понимать алгоритм действий, которое требуется для отправки сообщения в общий чат в игре CS 1.6. По умолчанию, нам нужно вызвать окно общего чата на клавишу **Y**, набрать текст сообщения и нажать **Enter** для отправки. 

1. **Откройте [Vial](https://ru.ergohaven.xyz/vial) или используйте [веб-версию](https://vial.rocks/), в верхнем меню перейдите во вкладку Macros, выберите номер макроса, в нижнем правом углу нажмите *Add action***

В данном примере мы будем создавать макрос **M1** через **Add action**

![image](/images/sm30/sm30_macros_7.gif)

2. **Добавим действие, которое активирует игровой чат**

Выберем действие **Tap**, нажмем **+ (плюс)** и назначим на нее клавишу **Y**

![image](/images/sm30/sm30_macros_8.gif)

3. **Добавим задержку между вызовом окна чата и набором сообщения (иначе текст не успеет корректно напечататься)**

Снова нажмем **Add action**, выберем **Delay (ms)** и установим время задерки в 100 миллисекунд

![image](/images/sm30/sm30_macros_9.gif)

>*Порядок действий в макросе идет сверху вниз, учитывайте это правило при создании макросов, если нужно поменять порядок действий в макросе - используйте кнопки стрелка вверх и вниз слева от перемещаемого действия*

4. **Добавим действие с набором текста сообщения**

Нажмем **Add action**, выберем **Text** и введем *Hello!* в поле для текста справа

![image](/images/sm30/sm30_macros_10.gif)

5. **Добавим задержку между набором сообщения и отправкой в чат**

Нажмем **Add action**, выберем **Delay (ms)** и установим время задерки в 100 миллисекунд

![image](/images/sm30/sm30_macros_11.gif)

>*Данная задержка необязательна в данном примере, но некоторых других задачах её лучше использовать для корректной работы макроса*

6. **Добавим действие, которое отправляет сообщение в игровой чат и сохраним макрос**

Нажмем **Add action**, выберем действие **Tap**, нажмем **+ (плюс)** и назначим на нее клавишу **Enter**

![image](/images/sm30/sm30_macros_12.gif)

В конце создания макроса его нужно сохранить, нажмите кнопку **Save** в нижнем правом углу

![image](/images/sm30/sm30_macros_13.gif)

>*Макросы сохраняются во внутреннюю память клавиатуры и так же работают с другого ПК. При сохранении макроса Vial попросит разблокировать клавиатуру путем удержания двух клавиш в верхнем левом углу*

7. **Добавим клавишу созданого макроса в раскладку**

В данном примере назначим наш макрос **M1** на клавишу третьего слоя **Layer 3**. Перейдем во вкладку **Keymap** в вехнем меню, выберем 3 слой, выберем интересущую нас клавишу на раскладке и нижней вкладке **Macros** нажмем на кнопку **M1**

![image](/images/sm30/sm30_macros_14.gif)

>*Выбирайте любой удобный слой и положение клавиши для вызова макроса, как создавать слои читайте выше*

Дополнительную информацию о функции Macros можно найти в официальной [QMK документации](https://docs.qmk.fm/feature_macros)  

</details>

### Настройка RGB подсветки в Vial
В **Vial** во вкладке **Lighting** можно кастомизировать подсветку клавиш изменяя вид, цвет, яркость и скорость анимации

<details>
  <summary>Настройка RGB</summary>

![image](/images/sm30/sm30_rgb.gif)

- **RGB Effect** - позволяет выбрать различные анимации либо статичный цвет
- **RGB Color** - настройка цвета подсветки
- **RGB Brighttless** - изменение яркости подсветки
- **RGB Speed** - изменение скорости анимации подсветки

После настройки всех параметров RGB подсветки нажмите **Save** в нижнем правом углу Vial, чтобы сохранить все изменения
</details>

**Более подробно о функционале Vial читайте в [статье](/pages/docs/vial)**

## Замена свитчей / установка хотсвап-энкодера

### Извлечение свитча
- **Снимите кейкап (колпачок клавиши):** используйте свитч-пуллер или специальный съемник для кейкапов
- **Извлеките старый свитч:** возьмите съемник для переключателей, захватите им защелки сверху и снизу свитча и аккуратно потяните вверх, пока он не выйдет из гнезда.

{{< video 
    autoplay="true"
    loop="true"
    muted="true"
    src="/video/sm30/switch_out.mp4" 
>}}
<br />

### Установка нового свитча
- **Установите новый свитч:** убедитесь, что контакты (пины) нового переключателя ровные и правильно совмещены с отверстиями на плате. Аккуратно вставьте его до щелчка.
- **Верните кейкап на место**

{{< video 
    autoplay="true"
    loop="true"
    muted="true"
    src="/video/sm30/switch_in.mp4" 
>}}
<br />

### Установка хотсвап-энкодера
- **Установите хотсвап-энкодер:** убедитесь, что контакты (пины) хотсвап-энкодера правильно совмещены с контактными площадками на плате (контакты энкодера должны быть снизу). Аккуратно вставьте его до щелчка.

{{< video 
    autoplay="true"
    loop="true"
    muted="true"
    src="/video/sm30/enc_in.mp4" 
>}}
<br />

### Извлечение хотсвап-энкодера
- **Снимите колпачок энкодера:** потяните вверх колпачок
- **Извлеките энкодер:** возьмите съемник для переключателей, захватите им защелки сверху и снизу энкодера и аккуратно потяните вверх, пока он не выйдет из гнезда.

{{< video 
    autoplay="true"
    loop="true"
    muted="true"
    src="/video/sm30/enc_out.mp4" 
>}}
<br />

## Перепрошивка/обновление встроенного ПО
### Подготовка:
- Скачайте последнюю версию прошивки [здесь](http://github.com/ergohaven/keymap_hub)<!--изменить ссылку на конкретный файл с прошивкой для SM30--> 
- Сохраните Вашу раскладку в программе Vial, нажав на меню **File**, дальше **Save current layout**

### Установка
Для перепрошивки/обновления встроенного ПО (firmware) кейпад необходимо перевести в режим загрузчика (bootloader), сделать это можно несколькими способами (выберите один):  
1. **Bootmagic:**
    - Зажмите верхнюю левую клавишу на второй строке (в раскладке по умолчанию клавиша Esc) и подключите USB кабель питания
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

2. **Через кнопку RESET:**
    - Подключите USB кабель питания и быстро нажмите кнопку **RESET** два раза на нижней части кейпада
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

3. **Через кнопку BOOT:**
    - Зажмите кнопку **BOOT** на нижней части кейпада и подключите USB кабель питания
    - Дождитесь когда контроллер перейдёт в режим загрузчика и откроется папка-хранилище

- Скопируйте или перетащите Uf2 файл, после чего контроллер должен моментально перезагрузиться и начать работать в обычном режиме
- Импортируйте в программу Vial раскладку, нажав на меню **File**, дальше **Load saved layout**  