---
title: "Всё о программе Vial"
tags: ["guide", "vial"]
---

Vial — это кроссплатформенный графический интерфейс с открытым исходным кодом и форк QMK для настройки клавиатуры в режиме реального времени.

Программа позволяет настроить клавиатуру с помощью простого и интуитивно понятного интерфейса без каких-либо знаний о программировании.

## Первое использование

- Скачайте и установите последнюю версию программы или используйте веб-версию
- Подключите клавиатуру и она будет автоматически обнаружена
- Разблокируйте клавиатуру, кликнув на меню **Security**, а затем **Unlock**, и следуйте инструкции, которая будет отображена на экране
- Измените любую клавишу, которую вы хотите, и она будет мгновенно переназначена, настройте различные параметры по своему вкусу
- Сохраните раскладку, нажав **File > Save current layout** (опционально)
![image](/images/vial/vial01.png)  

*Давайте теперь проверим, что делают основные вкладки*

## Keymap
Как следует из названия, здесь вы можете просмотреть и настроить свою раскладку.
Просто кликните на любую клавишу, которую вы хотите изменить, в верхнем меню, а затем выберите клавишу для замены в нижнем меню.
Ваша новая клавиша будет немедленно готова к использованию.

## Layer
Слои позволяют изменять функциональность всей клавиатуры в зависимости от того, на каком **слое** она находится в данный момент. Лучше всего представить слои, как будто они расположенны друг над другом. Клавиши можно настроить для переключения между слоями по мере необходимости, аналогично клавише Shift в числовом ряду.
Вы можете просмотреть каждый доступный слой, щелкнув соответствующий номер в верхней части интерфейса. Layer 0 — это ваш базовый/основной слой.

Переключение между слоями может осуществляться несколькими способами. В нижнем меню выберите вкладку слоя, чтобы просмотреть все различные параметры.

- MO(*) - моментально активирует слой. Как только вы отпустите клавишу, слой деактивируется
- DF(*) - изменяет, какой слой является слоем по умолчанию. Это остается до тех пор, пока вы не отключите девайс
- TG(*) - переключает слой, активируя его, если он неактивен, и наоборот
- TT(*) - Если вы удерживаете клавишу нажатой, слой активируется, а затем деактивируется, когда вы отпускаете (как МО). Если вы несколько раз коснетесь его, слой будет включен или выключен (например, TG). Для этого нужно 5 нажатий
- OSL(*) - моментально активирует слой, пока не будет нажата следующая клавиша
- LT layer (kc) - мгновенно активирует слой, когда он удерживается, отправляет код клавиши при нажатии. Код клавиши можно определить, как и все другие кнопки, просто выберите меньшее поле внутри

### Примеры использования слоёв:

- Отдельный слой под макросы, которые помогают быстро работать с входящей почтой
- Еще один слой позволяет открывать нужные нам папки или приложения за доли секунд
- Следующий слой настроен для оперативной работы в браузере
- На отдельный слой можно разместить "куски" кода
- Также, можно настроить специальный слой для игр


Символ треугольника обозначает пропуск. Это значит, что действие такое же, как и слой под ним. Это удобно, так как клавиши из разных слоев могут быть нажаты одновременно.  

*Теперь давайте посмотрим на вкладки нижнего меню и проверим, что они делают*

- Basic и ISO/JIS - это стандартные раскладки клавиатур ANSI, ISO, JIS
- Layers - см. информацию о слоях выше
- Quantum - конкретные коды клавиш из прошивки QMK, наведите курсор на любой интересующий код клавиши и появится описание
- Backlight - управление RGB подсветкой (в случае если ваша клавиатура поставляется с ней) непосредственно с клавиатуры
- App, Media and Mouse - дополнительные клавиши для управления приложениями и воспроизведением мультимедиа, также здесь вы можете настроить клавиатуру для выполнения действий мыши
- Tap Dance - настройте различные действия в зависимости от того, как используется клавиша. Например, одна и та же клавиша может быть настроена на активацию макроса при нажатии или активацию чего-либо еще при удерживании (см. информацию ниже).
- User - здесь вы можете найти пользовательские клавиши, которые мы запрограммировали для вашего использования, как и раньше, просто наведите курсор, чтобы узнать, что делает каждая функция
- Macro - макросы можно использовать для выполнения заранее запрограммированной последовательности действий (см информацию ниже)

## Macros
Макросы позволяют отправлять несколько нажатий клавиш при нажатии только одной клавиши. Они могут делать все, что вы хотите: печатать целые предложения, повторять однотипные действия в играх или даже помогать вам программировать.

### Конфигурация Macros
Откройте вкладку Macros. Все макросы, которые можно настроить, будут отображаться в виде отдельных вкладок. Выберите макрос, который вы хотите настроить.

Следующим шагом будет добавление действий:
- Add action — вручную добавляет действие в список. Настройте его так, чтобы он делал именно то, что вы хотите. выберите один из вариантов — удерживайте, нажмите, отпустите и задержите.
- Tap Enter — многие макросы заканчиваются клавишей **Enter**, поэтому эта кнопка упрощает их добавление.
- Record macro — позволяет записывать макрос прямо с клавиатуры.


Используйте эти клавиши для добавления действий в список. Они будут выполняться по порядку при активации макроса.
Действия можно изменить с помощью стрелок слева.
Когда вы будете удовлетворены конфигурацией всех макросов, нажмите **Save**, чтобы сохранить все изменения. Если вы хотите вернуться к тому, что уже есть на устройстве, нажмите **Revert**.

### Примеры
- Открыть Панель Задач на Windows зажав Ctrl+Shift и потом нажать Esc:  
![image](/images/vial/vial02.png)  

- Запуск программы в Windows, открыв меню **Пуск**, введя имя программы и нажав Enter:   
![image](/images/vial/vial03.png)  

- Ввод адреса:  
![image](/images/vial/vial04.png)  

### Использование Macros
После настройки макроса его можно использовать. Просто нажмите на клавишу, которую вы хотите использовать для макроса в раскладке, затем выберите ее в нижнем меню на вкладке **Macro**

![image](/images/vial/vial05.png)  

Дополнительную информацию о функции Macros можно найти в официальной [QMK документации](https://docs.qmk.fm/feature_macros)  

## Tap Dance
Данная функция, позволяет менять назначение клавиш в зависимости от того, сколько раз вы нажали клавишу и удерживаете ли вы ее.
Например, клавиши **X, C, V** могут выполнять функции **Вырезать**, **Копировать** и **Вставить**, пока вы удерживаете клавишу в течение короткого времени — никаких модификаторов не требуется.
Или нажмите клавишу точки с запятой один раз, отправьте точку с запятой. Нажмите дважды, быстро — поставьте двоеточие.

### Настройка Tap Dance
Нажмите на вкладку Tap Dance вверху и на один из доступных номеров под ней.
Каждая функция Tap Dance может быть настроена на выполнение различных действий в зависимости от того, как нажимается кнопка. В приведенном ниже случае, когда кнопка **On tap** (При нажатии), левый графический интерфейс нажимается, но когда кнопка On hold (При удержании), кнопка активирует слой 1. Два других варианта **On double tap** (При двойном нажатии) и **On tap + hold** ( На тап + удержание) тоже можно настроить.

![image](/images/vial/vial06.png)  

Tapping term представляет собой время, в течение которого прошивка различает действия. Если кнопка удерживается дольше, чем срок нажатия, это считается удержанием. Если кнопка удерживается меньше, чем срок нажатия, это считается нажатием.
Когда вы будете удовлетворены конфигурацией, нажмите **Save**, чтобы сохранить все изменения. Если вы хотите вернуться к тому, что уже есть на устройстве, нажмите **Revert**.

### Использование Tap Dance
После того, как функция tap dance настроена и сохранена, её можно использовать. Просто нажмите на клавишу, которую вы хотите использовать для tap dance, в раскладке клавиш, а затем выберите ее в нижнем меню на вкладке Tap Dance

![image](/images/vial/vial07.png)  

Дополнительную информацию о функции Tap Dance можно найти в официальной [QMK документации](https://docs.qmk.fm/features/tap_dance)

## Combos
Эта функция представляет собой решение типа аккорда для добавления пользовательских действий. Назначьте любые две клавиши, как одну. При одновременном нажатии двух клавиш (за определенное кол-во времени) срабатывает третья.

### Настройка Combo
Щелкните вкладку Combo вверху и один из доступных номеров под ней, чтобы отобразить настройки для этой конкретной комбинации. Можно настроить до 4-х комбинаций клавиш для активации одного действия. Каждая клавиша должна быть нажата в течение срока комбо. В приведенном ниже примере нажатие клавиши +/= и клавиши Backspace вместо этого произойдёт нажатие клавиши Delete

![image](/images/vial/vial08.png)  

### Использование Combo
После того, как Combo настроено и сохранено, его можно использовать. Нет необходимости назначать его на конкретную клавишу.

Дополнительную информацию о функции Combo можно найти в официальной [QMK документации](https://docs.qmk.fm/features/combo)

## Key overrides
Данная функция позволяет вам переназначить клавиши-модификаторы при их нажатии совместно с любой другой клавишей

### Настройка Key Overrides
В приведенном ниже примере при нажатии комбинации клавиш Left Ctrl + Backspace (две клавиши нужно нажимать без какого-либо определенного временного окна) будет заменено на Delete

![image](/images/vial/vial09.png)  

### Использование key overrides
После настройки функции key override её можно сразу использовать. Нет необходимости назначать на конкретную клавишу.

Дополнительную информацию о функции Key Overrides можно найти в официальной QMK документации

## QMK Settings
Данная вкладка нужна для тонкой настройки работы QMK.

- Magic - поменять местами разные клавиши-модификаторы для удобства
- Grave Escape - эта функция позволяет вам использовать клавишу Grave (` и ~) с помощью Escape
- Tap-Hold - точная настройка функции tap hold
- Auto Shift - нажмите клавишу c буквой и она напечатается. Нажмите клавишу и удерживайте ее немного дольше, и вы получите её заглавный вариант.
- Combo - точная настройка combo функции
- One Shot Keys - точная настройка one shot клавиш
- Mouse Keys - точная настройка клавиш мыши

## Matrix Tester
Здесь вы можете проверить нажатие клавиш на клавиатуре.

![image](/images/vial/vial10.png)  
